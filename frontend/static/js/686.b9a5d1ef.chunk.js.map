{"version":3,"file":"static/js/686.b9a5d1ef.chunk.js","mappings":"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","sources":["component/RoleManagement/updateRoles/UpdateRole.js","component/RoleManagement/RoleManagement.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport \"./UpdateRole.scss\";\nimport { IoMdAddCircle } from \"react-icons/io\";\nimport { FaCircleMinus } from \"react-icons/fa6\";\nimport axiosWithAuth from \"../../../utils/axiosClienttok\";\n// import { ToastContainer, toast } from \"react-toastify\";\n\nfunction UpdateRole() {\n  const roles = useSelector((state) => state.RoleAndPermissionReducer.roles);\n  const permissions = useSelector((state) => state.RoleAndPermissionReducer.permissions);\n\n  const [selectedRolePermissions, setSelectedRolePermissions] = useState([]);\n  const [remainingPermissions, setRemainingPermissions] = useState(permissions);\n  const [selectedRole, setSelectedRole] = useState(\"\");\n\n  const handleSelect = (e) => {\n    setSelectedRole([e.target.value]);\n  };\n\n  useEffect(() => {\n    async function getRolePermission() {\n      try {\n        const response = await axiosWithAuth.get(`/group-detail/${selectedRole}/`);\n        console.log(response?.data?.data?.permissions);\n        const rolePermission = response?.data?.data?.permissions;\n        console.log(rolePermission);\n        if (rolePermission.length > 0) {\n          const distinctPermissions = permissions.filter(\n            (user) => !rolePermission.some((friend) => friend.id === user.id)\n          );\n          setRemainingPermissions(distinctPermissions);\n          setSelectedRolePermissions(rolePermission);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    getRolePermission();\n  }, [selectedRole]);\n\n  const addPermission = (permission) => {\n    setSelectedRolePermissions([...selectedRolePermissions, permission]);\n    setRemainingPermissions(remainingPermissions.filter((p) => p !== permission));\n  };\n\n  const removePermission = (permission) => {\n    setSelectedRolePermissions(selectedRolePermissions.filter((p) => p !== permission));\n    setRemainingPermissions([...remainingPermissions, permission]);\n  };\n\n  async function handleUpdateRole(e) {\n    e.preventDefault();\n    const ids = selectedRolePermissions.map((item) => item.id);\n    console.log(selectedRole);\n    try {\n      const response = await axiosWithAuth.patch(`/group-detail/${selectedRole}/`, { permissions: ids });\n      console.log(response);\n      if (response?.data?.status === true) {\n        // toast.success(\"Role Updated\");\n      }\n    } catch (error) {\n      console.log(error);\n      // toast.error(\"Error\");\n    }\n  }\n\n  return (\n    <div className=\"create_sections\">\n      <div className=\"add_role\">\n        <select value={selectedRole} onChange={handleSelect}>\n          <option value=\"\">Select Role</option>\n          {roles?.map((item) => (\n            <option key={item?.id} value={item?.id}>\n              {item?.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"add_permissions\">\n        <div className=\"list_of_permissions\">\n          <table border={1}>\n            <tbody>\n              <tr className=\"column_name\">\n                <th>All Permissions</th>\n              </tr>\n              {remainingPermissions?.map((permission, index) => (\n                <tr className=\"column_value\" key={index}>\n                  <th>\n                    {permission.name}{\" \"}\n                    <button onClick={() => addPermission(permission)}>\n                      <IoMdAddCircle />\n                    </button>\n                  </th>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        <div className=\"added_list_of_permissions\">\n          <table border={1}>\n            <tbody>\n              <tr className=\"column_name\">\n                <th> Role Permissions</th>\n              </tr>\n              {selectedRolePermissions?.map((permission, index) => (\n                <tr className=\"column_value\" key={index}>\n                  <th>\n                    {permission?.name}{\" \"}\n                    <button onClick={() => removePermission(permission)}>\n                      <FaCircleMinus />\n                    </button>\n                  </th>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n      <div className=\"button_\">\n        <button onClick={handleUpdateRole}>Update role</button>\n      </div>\n    </div>\n  );\n}\n\nexport default UpdateRole;\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./RoleManagement.scss\";\r\nimport axiosWithAuth from \"../../utils/axiosClienttok\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getListofRoles, getListOfPermissions } from \"../../Redux/Roleandpermissionreducer/RoleAndPermissionReducer\";\r\nimport UpdateRole from \"./updateRoles/UpdateRole\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nfunction RoleManagement() {\r\n  const roles = useSelector((state) => state.RoleAndPermissionReducer.roles);\r\n  const permissions = useSelector((state) => state.RoleAndPermissionReducer.permissions);\r\n  const dispatch = useDispatch();\r\n\r\n  const [create, setCreate] = useState(false);\r\n  const [update, setUpdate] = useState(false);\r\n  const [createRole, setCreateRole] = useState(\"\");\r\n  // const [selectedRole, setSelectedRole] = useState(\"\");\r\n  const [selectedPermissions, setSelectedPermissions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getListofRoles());\r\n    dispatch(getListOfPermissions());\r\n  }, []);\r\n\r\n  // const handleRoleChange = (e) => {\r\n  //   setSelectedRole(e.target.value);\r\n  // };\r\n\r\n  const handleOpenCreate = () => {\r\n    setCreate(true);\r\n    setUpdate(false);\r\n  };\r\n\r\n  const handleOpenUpdate = () => {\r\n    setUpdate(true);\r\n    setCreate(false);\r\n  };\r\n\r\n  const handleAddPermission = (permission) => {\r\n    if (!selectedPermissions.includes(permission)) {\r\n      setSelectedPermissions([...selectedPermissions, permission]);\r\n    } else {\r\n      setSelectedPermissions(selectedPermissions.filter((item) => item !== permission));\r\n    }\r\n  };\r\n\r\n  async function handleCreateRole(e) {\r\n    e.preventDefault();\r\n    const ids = selectedPermissions?.map((entry) => entry.id);\r\n    try {\r\n      const response = await axiosWithAuth.post(\"/create-group/\", { name: createRole, permissions: ids });\r\n      console.log(response);\r\n      if (response?.data?.success === true) {\r\n        toast.success(\"Role created\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\"Error\");\r\n    } finally {\r\n      setCreate(false);\r\n      setSelectedPermissions([]);\r\n      dispatch(getListofRoles());\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"role_mangement\">\r\n      <div className=\"inner_role_mangement\">\r\n        <div className=\"roles\">\r\n          <table border={1}>\r\n            <tbody>\r\n              <tr className=\"column_name\">\r\n                <th>Role</th>\r\n              </tr>\r\n\r\n              {roles &&\r\n                roles?.map((item, index) => (\r\n                  <tr className=\"column_value\" key={index}>\r\n                    <th>{item?.name}</th>\r\n                  </tr>\r\n                ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className=\"create_edit\">\r\n          <div className=\"button\">\r\n            <button className={create ? \"colour\" : \"normal\"} onClick={handleOpenCreate}>\r\n              Create Role\r\n            </button>\r\n            <button className={update ? \"colour\" : \"normal\"} onClick={handleOpenUpdate}>\r\n              Edit Role\r\n            </button>\r\n          </div>\r\n          {create && (\r\n            <div className=\"create_section\">\r\n              <div className=\"add_role\">\r\n                <input type=\"text\" placeholder=\"Create Role\" onChange={(e) => setCreateRole(e.target.value)} />\r\n              </div>\r\n              <div className=\"add_permissions\">\r\n                <div className=\"list_of_permissions\">\r\n                  <table border={1}>\r\n                    <tbody>\r\n                      <tr className=\"column_name\">\r\n                        <th>Permissions</th>\r\n                      </tr>\r\n                      {permissions &&\r\n                        permissions?.map((item, index) => (\r\n                          <tr\r\n                            className={`column_value ${selectedPermissions.includes(item) ? \"selected\" : \"\"}`}\r\n                            key={index}\r\n                            onClick={() => handleAddPermission(item)}\r\n                          >\r\n                            <th>{item?.name}</th>\r\n                          </tr>\r\n                        ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n                <div className=\"added_list_of_permissions\">\r\n                  <table border={1}>\r\n                    <tbody>\r\n                      <tr className=\"column_name\">\r\n                        <th> Added Permissions</th>\r\n                      </tr>\r\n                      {selectedPermissions &&\r\n                        selectedPermissions.map((item, index) => (\r\n                          <tr key={index} className=\"column_value\">\r\n                            <th>{item?.name}</th>\r\n                          </tr>\r\n                        ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n              <div className=\"button_\">\r\n                <button onClick={handleCreateRole}>Add role</button>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {update && <UpdateRole />}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RoleManagement;\r\n"],"names":["roles","useSelector","state","RoleAndPermissionReducer","permissions","selectedRolePermissions","setSelectedRolePermissions","useState","remainingPermissions","setRemainingPermissions","selectedRole","setSelectedRole","useEffect","async","_response$data","_response$data$data","_response$data2","_response$data2$data","response","axiosWithAuth","get","console","log","data","rolePermission","length","distinctPermissions","filter","user","some","friend","id","error","getRolePermission","_jsxs","className","children","_jsx","value","onChange","e","target","map","item","name","border","permission","index","onClick","p","addPermission","IoMdAddCircle","removePermission","FaCircleMinus","preventDefault","ids","_response$data3","patch","status","dispatch","useDispatch","create","setCreate","update","setUpdate","createRole","setCreateRole","selectedPermissions","setSelectedPermissions","getListofRoles","getListOfPermissions","handleOpenCreate","handleOpenUpdate","type","placeholder","includes","handleAddPermission","entry","post","success","toast","UpdateRole"],"sourceRoot":""}